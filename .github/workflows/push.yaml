# name: ci

# on:
  # push:
    # branches: main

# env:
  # IMAGE_NAME: ghtoken_product_demo

# jobs:
  # login:
    # runs-on: ubuntu-latest
    # steps:
    #   -
    #     name: Login to GitHub Container Registry
    #     uses: docker/login-action@v2
    #     with:
    #       registry: ghcr.io
    #       password: ${{ secrets.GITHUB_TOKEN }}

    # steps:
      # - uses: actions/checkout@v3
      # - name: Build image
        # run: docker build . --file Dockerfile --tag $IMAGE_NAME --label "runnumber=${GITHUB_RUN_ID}"

      # - name: Log in to registry
        # This is where you will update the PAT to GITHUB_TOKEN
        # run: echo "${{ secrets.GITHUB_TOKEN }}" | docker login ghcr.io -u $ --password-stdin

name: Create and publish a Docker image

on:
  push:
    branches: main

env:
  REGISTRY: ghcr.io
  IMAGE_NAME: ${{ github.repository }}

jobs:
  build-and-push-image:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Log in to the Container registry
        uses: docker/login-action@v2
        with:
          registry: ${{ env.REGISTRY }}
          username: ${{ github.actor }}
          password: ${{ secrets.GITHUB_TOKEN }}

# name: Build
# 
# on:
  # push:
    # branches:
      # - main
# 
# jobs:
  # Build:
    # runs-on: ubuntu-20.04
    # steps:
      # - uses: actions/checkout@v2
      # - name: Build Docker image
        # run: docker build -t main:$(date +%s) .

